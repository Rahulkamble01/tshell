<!-- Tabs -->
<section id="tabs">
  <div class="container">
    <div class="row" >
      <div class="col-xs-12 col-lg-12" >
        <nav>
          <div class="nav nav-tabs nav-fill" id="nav-tab" role="tablist"> 
            <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-home" role="tab" aria-controls="nav-home"
              aria-selected="true">Upload a Question</a>
            <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-profile" role="tab" aria-controls="nav-profile"
              aria-selected="false">Upload multiple questions</a>
          </div>
        </nav>
        <div class="tab-content " id="nav-tabContent" style="background-color: #fbfbfb;padding: 5px">
          <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
            <h3 class=" uploadText card-header">Adding question for "Java" </h3>
            <label for="name">
             Topics:</label>
            <div>
              <select class="dropdown" [(ngModel)]="topic" #topicOfSkill="ngModel" class="form-control col-lg-4 col-sm-4 col-6" required>
                <option *ngFor="let topic of topicList" value="{{topic[1]}}">{{topic[1]}}</option>
              </select>
              <div *ngIf="topicOfSkill.invalid  && (topicOfSkill.dirty || topicOfSkill.touched)" class="alert alert-danger">
                <div *ngIf="topicOfSkill.errors.required">
                  Topic Sholud be Selected.
                </div>
              </div>
            </div>
            <div class=" card">
              <label class="card-header">
               Question:
                <a href="#" data-toggle="modal" data-target="#editQuestion">
                  <i class="fas fa-pencil-alt" title="Edit question"></i>
                </a>
              </label>
              <div class="card-body" style="margin-left:13px; background-color: #fbfbfb;border-radius: 3px;"
               data-toggle="modal" data-target="#editQuestion">
                {{question}}
              </div>
            </div>
            <div class="modal fade" id="editQuestion" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
              <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                  <div class="modal-header">
                      <label>Question:</label>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                      <span aria-hidden="true">&times;</span>
                    </button>
                  </div>
                  <div class="modal-body">
                    <textarea style="height: 250px;" class="form-control" rows="3"
                     [(ngModel)]="question" minlength="10" maxlength="500" #questionForm="ngModel"
                      required (click)="questionDescriptionValidation()"></textarea>
                    <div *ngIf="questionForm.invalid && (questionForm.dirty || questionForm.touched)" class="alert alert-danger">
                      <div *ngIf="questionForm.errors.required">
                        question is required.
                      </div>
                      <div *ngIf="questionForm.errors.minlength">
                        Question must be at least 10 characters long.
                      </div>
                    </div>
                    <div class="alert alert-danger" *ngIf="question?.length >= 500">
                        Question must not be at greater than 500 characters long.
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-ts-primary" (click)="saveQuestion()" data-dismiss="modal">Ok</button>
                  </div>
                </div>
              </div>
            </div>
            <div class=" card ">
              <label class="card-header">Add Options:
                <button (click)="addOption()" class="addOptionButton btn btn-ts-primary" data-toggle="modal" [attr.data-target]="'#mo'+count"
                  [disabled]="count>=5" style="margin-left:10px">
                  <i class="fas fa-plus"> </i>
                </button>
              </label>
            </div>
            <div class=" card" *ngFor="let option of optionsList">
              <div class="row card-body" style="padding: 2px " >
                <div class="col-lg-1 col-sm-2 col-2">
                  {{option.id}}.
                </div>
                <div class="col-lg-8 col-sm-7 col-7" >
                  {{option.description}}
                </div>
                <div class="col-lg-1 col-sm-1 col-1">
                  <a href="#" data-toggle="modal" [attr.data-target]="'#mo'+option.id">
                    <i class="fas fa-pencil-alt" title="Edit Option"></i>
                  </a>
                </div>
                <div class="col-lg-1 col-sm-1 col-1">
                  <i class="far fa-trash-alt" (click)="removeOption(option.id)" title="Remove option"></i>
                </div>
                <div class="col-lg-1 col-sm-1 col-1">
                  <input type="checkbox" [name]="'ans'+option.id" class="checkmark" [(ngModel)]="option.answer" (change)="check($event)">
                </div>
                <div class="modal fade" [id]="'mo'+option.id" tabindex="-1" role="dialog"
                                 aria-labelledby="exampleModalCenterTitle" aria-hidden="true"
                                                            data-backdrop="static" data-keyboard="false">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                          <label>Option:{{option.id}}</label>
                        <button type="button" class="close" (click)="optionDescriptionValidation()" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                      
                        <textarea style="height: 250px;" class="form-control" [(ngModel)]="option.description" 
                                                          rows="3" #descriptionOption="ngModel" minlength="4" maxlength="250" required></textarea>
                        <div *ngIf="descriptionOption.invalid && (descriptionOption.dirty || descriptionOption.touched)" 
                                                     class="alert alert-danger">
                          <div *ngIf="descriptionOption.errors.required">
                            Option is required.
                          </div>
                          <div *ngIf="descriptionOption.errors.minlength">
                              Option must be atleast 10 characters length.
                          </div>
                        </div>
                        <div class="alert alert-danger" *ngIf="option.description?.length >= 250">
                            Option must not be greater than 250 characters length.
                        </div>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-ts-cancel" data-dismiss="modal" (click)="optionDescriptionValidation()">Close</button>
                        <button type="button" class="btn btn-ts-primary" (click)="saveOption()" data-dismiss="modal">Ok</button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div *ngIf="count==5">
              <span style="color:red">*</span>Max 5 Options allowed</div>
            <div>
              <a [routerLink]="['/questions']">
                <button type="submit" style="margin-top: 3px;" (click)="submit()" class="btn btn-ts-primary addButton" style="float: right;"
                  [disabled]="!(questionForm.valid&& isChecked==true && topicOfSkill.valid && optionTemp==1 && count!=0)">Add Question</button>
              </a>
            </div>
          </div>
          <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
            <div class="card">
              <h3 class="uploadText">Want to upload Questions in bulk?
                <div> Upload your questions as in the
                  <a href="./assets/Questions Format.csv">template</a> format.</div>
              </h3>
              <form [formGroup]="uploadForm" (ngSubmit)="upload()">
                <div class="form-group upload row align-items-center justify-content-center">
                  <input type="file" formControlName="csvFile" accept=".csv" (change)="onSelectFile($event)" style="height: 100%">
                  <span>
                    <button type="submit" style="margin-top: 2px;" [disabled]="!uploadForm.valid" class="btn btn-ts-primary ">Upload</button>
                  </span>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<!-- ./Tabs -->